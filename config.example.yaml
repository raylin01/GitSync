# GitSync Configuration

# Trigger mode: "webhook", "polling", or "both"
triggerMode: "webhook"

# Webhook settings (used if triggerMode is webhook or both)
webhook:
  port: 4000
  secret: ""  # GitHub/GitLab signature verification secret

# Polling settings (used if triggerMode is polling or both)
polling:
  interval: 60  # seconds between checks

# Repositories to watch
repos:
  - name: "my-web-app"
    path: "/path/to/my-web-app"
    repoUrl: "git@github.com:username/my-web-app.git"  # For cloning if folder is empty
    branch: "main"
    
    # Dependency management: npm, bun, yarn, pip, or none
    dependencies:
      type: "npm"
      # venv: "auto"  # For pip - creates .venv if needed
    
    # Optional build command (runs after install, before restart)
    build:
      command: "npm run build"
    
    # Scripts to restart in TaskServer after deployment
    restartScripts:
      - "webServer"
    
    # Scripts to register in TaskServer on first clone (optional)
    # These will be added to TaskServer and auto-started
    registerScripts:
      - name: "webServer"
        command: "cd /path/to/my-web-app && npm start"
        type: "forever"
    
    # TaskServer connection (optional - uses global if not set)
    # taskServer:
    #   url: "http://localhost:3000"
    #   apiKey: ""

# Global TaskServer settings
taskServer:
  url: "http://localhost:3000"
  apiKey: ""  # Optional API key for TaskServer auth

# Notifications (optional)
notifications:
  slack:
    enabled: false
    webhookUrl: ""
  discord:
    enabled: false
    webhookUrl: ""
